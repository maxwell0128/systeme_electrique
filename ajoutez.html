<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bouton d'enregistrement des informations de contact</title>
    <style>
        .btn-contact {
            display: inline-block;
            padding: 10px 20px;
            background-color: #007bff;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            text-decoration: none;
        }

        .btn-contact:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
    <h1>Enregistrez mes informations de contact</h1>
    <p>Cliquez sur le bouton ci-dessous pour enregistrer facilement mes informations dans votre répertoire téléphonique.</p>
    <button class="btn-contact" id="btnContact">Enregistrer</button>

    <script>
        const btnContact = document.getElementById('btnContact');

        btnContact.addEventListener('click', () => {
            // Préparez les informations de contact
            const contactInfo = {
                Name: "Franck Michaël AKOÏ",
                Organization: "Systeme Electrique",
                Work_Phone: "+225 01 72 038 891",
                Cell_Phone: "+225 07 68 242 541",
                Work_Email: "systemelectrique225@mail.com",
                Address: "Abidjan Rue i86, Ivory Coast (Côte d'Ivoire)",
            };

            // Convertissez les informations de contact au format vCard
            const vCardString = generateVCard(contactInfo);

            // Déclenchez le téléchargement du fichier vCard
            triggerDownload(vCardString, 'Franck_Michaël_AKOÏ.vcf'); // Nom de fichier avec prénom et nom
        });

        // Fonction pour générer la chaîne vCard
        function generateVCard(contactInfo) {
            let vCard = 'BEGIN:VCARD\n';
            vCard += 'VERSION:3.0\n';

            for (const key in contactInfo) {
                if (contactInfo.hasOwnProperty(key)) {
                    const value = contactInfo[key];
                    if (Array.isArray(value)) { // Gère les tableaux de valeurs (numéros de téléphone)
                        for (let i = 0; i < value.length; i++) {
                            vCard += `${key}:${value[i]}\n`;
                        }
                    } else {
                        vCard += `${key}:${value}\n`;
                    }
                }
            }

            vCard += 'END:VCARD\n';
            return vCard;
        }

        // Fonction pour déclencher le téléchargement du fichier vCard
        function triggerDownload(vCardString, filename) {
            const blob = new Blob([vCardString], { type: 'text/vcard' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            a.rel = 'noopener'; // Ajout de l'attribut rel pour améliorer l'accessibilité
            a.click();
            URL.revokeObjectURL(url);
        }
    </script>
</body>
</html>
